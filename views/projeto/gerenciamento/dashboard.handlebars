<div class="row mt-1" style="padding: 10px;width: 100%;">

    <div class="row mt-1" style="text-align: center;padding-left: 3%;">
        <div class="col" style="font-size: 20px;">
            <div class="text-white" style="padding:10px; border-radius: 80px;background-color: rgb(71, 114, 207);">
                <h5 class='fw-bold'>Lucro Líquido</h5>
                <label class='col-form-label' class='text-center mt-2'>R$ {{projeto.lucroLiquido}}</label
                    class='col-form-label'>
            </div>
        </div>
        <div class="col">
            <a href='/gerenciamento/dashboard/{{projeto._id}}' style='text-decoration: none;'>
                <div class="text-white" style="border-radius: 80px;background-color: rgba(71, 135, 207, 1);">
                    <div class="fw-bold text-center">Valor Total <br>
                        <label class='col-form-label col-form-label-sm'>R$ {{projeto.valor}}</label>
                    </div>
                    <h2 class="text-center card-title">{{projeto.parLiqVlr}} %</h2>
                </div>
            </a>
        </div>
        <div class="col">
            <a href='/gerenciamento/dashboardliquido/{{projeto._id}}' style='text-decoration: none;'>

                <div class="text-white" style="border-radius: 80px;background-color: rgba(41, 8, 159);">
                    <div class="fw-bold text-center">Valor Faturado <br>
                        <label class='col-form-label col-form-label-sm'>R$ {{projeto.vlrNFS}}</label>
                    </div>
                    <h2 class="text-center card-title">{{projeto.parLiqNfs}} %</h2>
                </div>
            </a>
        </div>
        <div class="col mt-3">
            {{#if projeto.desAdm}}
            <div class="text-white" style="background-color: rgba(194, 189, 188, 1)">
                <div class="fw-bold">Despesas Administrativas</div>
                <label class='col-form-label'>R$ {{projeto.desAdm}}</label>
            </div>
            {{/if}}
        </div>
        {{#if projeto.reserva}}
        <div class="col mt-3">
            <div class="text-white mb-1" style="background-color: rgb(32, 255, 62);">
                <div class="fw-bold">Reserva</div>
                <label class='col-form-label'>R$ {{projeto.reserva}}</label>
            </div>
        </div>
        {{/if}}
        <div class="col-md-1" style="margin-top: 1%;">
            {{#if projeto.foiRealizado}}
            {{else}}
            <a href='/projeto/edicao/{{projeto._id}}' class='btn btn-primary btn-sm'> Editar </a><br>
            {{/if}}
            <a href='/projeto/vermais/{{projeto._id}}' class='btn btn-primary btn-sm mt-1'> Ver Mais </a>
        </div>
    </div>
    <div class="row mt-1" style="text-align: center;">
        <div class="col-md-6">
            <label class='col-form-label fw-bold mt-1'>Participação sobre o Total do Projeto</label>
            <div style="height: 250px;">
                <canvas id='chartLL' class='mb-4'></canvas>
            </div>
            <input id='parLiqVlr' name='parLiqVlr' type="hidden" value={{projeto.parLiqVlr}}>
            <input id='parKitVlr' name='parKitVlr' type="hidden" value={{projeto.parKitVlr}}>
            <input id='parDedVlr' name='parDedVlr' type="hidden" value={{projeto.parDedVlr}}>
            <input id='parImpVlr' name='parImpVlr' type="hidden" value={{projeto.parImpVlr}}>
            <input id='parISSVlr' name='parISSVlr' type="hidden" value={{projeto.parISSVlr}}>
            <input id='parComVlr' name='parComVlr' type="hidden" value={{projeto.parComVlr}}>

            <div class="row text-center" style="font-size: 14px;padding: 20px">
                <div class="col">
                    <div class="text-white" style="background-color:  rgba(249, 240, 71, 1);">
                        <div class="fw-bold card-header">Equipamento</div>
                        <label class='col-form-label'>R$ {{projeto.vlrkit}}</label>
                    </div>
                </div>
                <div class="col">
                    <div class='text-white' style=" background-color: rgba(194, 189, 188, 1);">
                        <div class="fw-bold card-header">Deduções</div>
                        <label class='col-form-label'>R$ {{projeto.totcop}}</label>
                    </div>
                </div>
                {{#if projeto.vlrcom}}
                <div class="col">
                    <div class="text-white" style="background-color:rgba(255, 161, 8, 1);">
                        <div class="fw-bold card-header">Comissão</div>
                        <label class='col-form-label'>R$ {{projeto.vlrcom}}</label>
                    </div>
                </div>
                {{/if}}
            </div>
            <div class="row text-center"
                style="font-size: 14px;padding-bottom: 20px;padding-left: 20px; padding-right: 20px">
                <div class="col">
                    <div class="text-white" style="background-color: rgba(255, 49, 53, 1);">
                        <div class="fw-bold card-header">ISS</div>
                        <label class='col-form-label'>R$ {{projeto.impNFS}}</label>
                    </div>
                </div>
                <div class="col">
                    <div class="text-white" style="background-color: rgba(255, 49, 53, 1);">
                        <div class="fw-bold card-header">Tributos</div>
                        <label class='col-form-label'>R$ {{projeto.totalImposto}}</label>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <label class='col-form-label fw-bold mt-1'>Participação das Deduções sobre o Total do Projeto</label>
            <div style="height: 250px;">
                <canvas id='chartDes'></canvas>
            </div>
            <input type='hidden' id='parIntVlr' value='{{projeto.parIntVlr}}'>
            <input type='hidden' id='parGesVlr' value='{{projeto.parGesVlr}}'>
            <input type='hidden' id='parProVlr' value='{{projeto.parProVlr}}'>
            <input type='hidden' id='parArtVlr' value='{{projeto.parArtVlr}}'>
            <input type='hidden' id='parDesVlr' value='{{projeto.parDesVlr}}'>
            <input type='hidden' id='parCmbVlr' value='{{projeto.parCmbVlr}}'>
            <input type='hidden' id='parEstVlr' value='{{projeto.parEstVlr}}'>
            <input type='hidden' id='parAliVlr' value='{{projeto.parAliVlr}}'>
            <input type='hidden' id='parResVlr' value='{{projeto.parResVlr}}'>

            <div class="row text-center" style="font-size: 14px;padding: 20px">
                <div class="col">
                    <div class="text-white" style=" background-color: rgba(70, 70, 70, 1);">
                        <div class="fw-bold card-header">Instalação</div>
                        <label class='col-form-label'>R$ {{projeto.totint}}</label>
                    </div>
                </div>
                <div class="col">
                    <div class="text-white" style=" background-color: rgba(110, 110, 110, 1);">
                        <div class="fw-bold card-header">Projetista</div>
                        <label class='col-form-label'>R$ {{projeto.totpro}}</label>
                    </div>
                </div>
                <div class="col">
                    <div class="text-white" style=" background-color: rgba(90, 90, 90, 1);">
                        <div class="fw-bold card-header">Gestão</div>
                        <label class='col-form-label'>R$ {{projeto.totges}}</label>
                    </div>
                </div>
                <div class="col">
                    <div class="text-white" style=" background-color: rgba(130, 130, 130, 1);">
                        <div class="fw-bold card-header">Valor ART</div>
                        <label class='col-form-label'>R$ {{projeto.vlrart}}</label>
                    </div>
                </div>
            </div>
            <div class="row text-center"
                style="font-size: 14px;padding-bottom: 20px;padding-left: 20px; padding-right: 20px">
                {{#if projeto.parEstVlr}}
                <div class="col">
                    <div class="text-white" style=" background-color: rgba(190, 190, 190, 1);">
                        <div class="fw-bold card-header">Estadia</div>
                        <label class='col-form-label'>R$ {{projeto.tothtl}}</label>
                    </div>
                </div>
                {{/if}}
                {{#if projeto.parAliVlr}}
                <div class="col">
                    <div class="text-white" style="background-color: rgba(210, 210, 210, 1);">
                        <div class="fw-bold card-header">Alimentação</div>
                        <label class='col-form-label'>R$ {{projeto.totali}}</label>
                    </div>
                </div>
                {{/if}}
                {{#if projeto.parDesVlr}}
                <div class="col">
                    <div class="text-white" style=" background-color: rgba(150, 150, 150, 1);">
                        <div class="fw-bold card-header">Deslocamento</div>
                        <label class='col-form-label'>R$ {{projeto.totdes}}</label>
                    </div>
                </div>
                {{/if}}
                {{#if projeto.parCmbVlr}}
                <div class="col">
                    <div class="text-white" style=" background-color: rgba(170, 170, 170, 1);">
                        <div class="fw-bold card-header">Combustível</div>
                        <label class='col-form-label'>R$ {{projeto.totcmb}}</label>
                    </div>
                </div>
                {{/if}}
            </div>
        </div>
    </div>
</div>

<script type='text/javascript'>
    //Gráfico Pariticpação Lucro Liquido
    var parLiqVlr = document.getElementById('parLiqVlr')
    var parKitVlr = document.getElementById('parKitVlr')
    var parDedVlr = document.getElementById('parDedVlr')
    var parImpVlr = document.getElementById('parImpVlr')
    var parISSVlr = document.getElementById('parISSVlr')
    var parComVlr = document.getElementById('parComVlr')

    var perLL = [parLiqVlr.value,
    parKitVlr.value,
    parDedVlr.value,
    parImpVlr.value,
    parISSVlr.value,
    parComVlr.value]

    //Gráfico Participação Despesas
    var parIntVlr = document.getElementById('parIntVlr')
    var parGesVlr = document.getElementById('parGesVlr')
    var parProVlr = document.getElementById('parProVlr')
    var parArtVlr = document.getElementById('parArtVlr')
    var parDesVlr = document.getElementById('parDesVlr')
    var parCmbVlr = document.getElementById('parCmbVlr')
    var parEstVlr = document.getElementById('parEstVlr')
    var parAliVlr = document.getElementById('parAliVlr')
    var parResVlr = document.getElementById('parResVlr')

    var parTraVlr
    if (parCmbVlr.value > 0) {
        parTraVlr = parCmbVlr.value
    } else {
        parTraVlr = parDesVlr.value
    }

    var perDes = [parIntVlr.value,
    parGesVlr.value,
    parProVlr.value,
    parArtVlr.value,
    parDesVlr.value,
    parCmbVlr.value,
    parEstVlr.value,
    parAliVlr.value,
    parResVlr.value]

    var ctxLL = document.getElementById('chartLL').getContext('2d');
    var ctxDes = document.getElementById('chartDes').getContext('2d');

    var chartLL = new Chart(ctxLL, {
        type: 'pie',
        data: {
            labels: ['Lucro Líquido', 'Kit Gerador', 'Deduções', 'Tributos', 'ISS', 'Comissão'],
            datasets: [{
                data: [perLL[0],
                perLL[1],
                perLL[2],
                perLL[3],
                perLL[4],
                perLL[5]],

                backgroundColor: [
                    'rgba(71, 135, 207, 0.5)',
                    'rgba(249, 240, 71, 0.5)',
                    'rgba(194, 189, 188, 0.5)',
                    'rgba(255, 49, 53, 0.5)',
                    'rgba(255, 49, 53, 0.5)',
                    'rgba(255, 161, 8, 0.5)'
                ],

                borderColor: [
                    'rgba(71, 135, 207, 1)',
                    'rgba(249, 240, 71, 1)',
                    'rgba(194, 189, 188, 1)',
                    'rgba(255, 49, 53, 1)',
                    'rgba(255, 49, 53, 1)',
                    'rgba(255, 161, 8, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: {
                animateScale: true
            }

        }
    });

    var chartDes = new Chart(ctxDes, {
        type: 'pie',
        data: {
            labels: ['Instalação', 'Gestão', 'Projetista', 'Valor ART', 'Deslocamento', 'Combustível', 'Estadia', 'Alimentação'],
            datasets: [{
                data: [perDes[0],
                perDes[1],
                perDes[2],
                perDes[3],
                perDes[4],
                perDes[5],
                perDes[6],
                perDes[7]],

                backgroundColor: [
                    'rgba(70, 70, 70, 0.2)',
                    'rgba(90, 90, 90, 0.2)',
                    'rgba(110, 110, 110, 0.2)',
                    'rgba(130, 130, 130, 0.2)',
                    'rgba(150, 150, 150, 0.2)',
                    'rgba(170, 150, 170, 0.2)',
                    'rgba(190, 190, 190, 0.2)',
                    'rgba(210, 210, 210, 0.2)'
                ],

                borderColor: [
                    'rgba(70, 70, 70, 1)',
                    'rgba(90, 90, 90, 1)',
                    'rgba(110, 110, 110, 1)',
                    'rgba(130, 130, 130, 1)',
                    'rgba(150, 150, 150, 1)',
                    'rgba(170, 150, 170, 1)',
                    'rgba(190, 190, 190, 1)',
                    'rgba(210, 210, 210, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: {
                animateScale: true
            }
        }
    });
</script>