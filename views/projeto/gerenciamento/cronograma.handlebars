<script>

    function infoPlano() {
        alert('O planejamento do projeto de implantação de uma usina considera: Escopo, Cronogrma, Custo, Aquisições, Recursos, Qualidade, Riscos e Comunicação.')

    };
    function infoPrj() {
        alert('O projeto elétrico contempla: Memorial Descritivo, Art e Diagramas.')

    };
    function validaDate() {
        var temEae = document.getElementById('temArmazenamento')
        var ehDireto = document.getElementById('ehDireto')
        var perGes = document.getElementById('perges')
        var perPro = document.getElementById('perpro')
        var perIns = document.getElementById('perins')
        var perDes = document.getElementById('perdes')
        var perAli = document.getElementById('perali')
        var perCmb = document.getElementById('percmb')
        var perHtl = document.getElementById('perhtl')
        var dataGes = document.getElementById('datepla')
        var dataPro = document.getElementById('dateprj')
        var dataMod = document.getElementById('datemod')
        var dataEae = document.getElementById('dateeae')
        if ((dataGes.value != '' && typeof dataGes.value != 'undefined') && (perGes.value == 0 || perGes.value == '' || typeof perGes.value == 'undefined')) {
            alert('Percentual de conclusão da atividade de planejamento: 100%')
            perGes.value = 100
        }
        if ((dataPro.value != '' && typeof dataPro.value != 'undefined') && (perPro.value == 0 || perPro.value == '' || typeof perPro.value == 'undefined')) {
            alert('Percentual de conclusão da atividade de projetista: 100%')
            perPro.value = 100
        }
        if (temArmazenamento.value == 'checked') {
            if ((dataEae.value != '' && typeof dataEae.value != 'undefined') && (perIns.value == 0 || perIns.value == '' || typeof perIns.value == 'undefined')) {
                alert('Percentual de conclusão da atividade de instalação: 100%')
                perIns.value = 100
                perAli.value = 100
                if (ehDireto == 'true') {
                    perDes.value = 100
                } else {
                    perHtl.value = 100
                    perCmb.value = 100
                }
            }
        } else {
            if ((dataMod.value != '' && typeof dataMod.value != 'undefined') && (perIns.value == 0 || perIns.value == '' || typeof perIns.value == 'undefined')) {
                alert('Percentual de conclusão da atividade de instalação: 100%')
                perIns.value = 100
                perAli.value = 100
                if (ehDireto == 'true') {
                    perDes.value = 100
                } else {
                    perHtl.value = 100
                    perCmb.value = 100
                }
            }
        }
    };

    function conclusao() {
        var dataGes = document.getElementById('datepla')
        var dataPro = document.getElementById('dateprj')
        var dataMod = document.getElementById('datemod')
        var dataEae = document.getElementById('dateeae')
        var dataPnl = document.getElementById('datepnl')
        var perGes = document.getElementById('perges')
        var perPro = document.getElementById('perpro')
        var perIns = document.getElementById('perins')
        var temArmazenamento = document.getElementById('temArmazenamento')
        var temPainel = document.getElementById('temPainel')
        if (dataGes.value == '' || dataGes.value == null || typeof dataGes.value == 'undefined') {
            if (perGes.value == 100) {
                alert('Data de conclusão da atividade de gestão: ' + dataHoje())
                dataGes.value = dataHoje()
            }
        }
        if (dataPro.value == '' || dataPro.value == null || typeof dataPro.value == 'undefined') {
            if (perPro.value == 100) {
                alert('Data de conclusão da atividade do projetista: ' + dataHoje())
                dataPro.value = dataHoje()
            }
        }
        if (temArmazenamento.value == 'checked' && temPainel.value == '') {
            if (perIns.value == 100 && dataEae.value == '' || dataEae.value == null || typeof dataEae.value == 'undefined') {
                alert('Data de conclusão da atividade de armazenamento: ' + dataHoje())
                dataEae.value = dataHoje()
                dataMod.value = dataHoje()
            }
        }
        if (temArmazenamento.value == '' && temPainel.value == 'checked') {
            if (perIns.value == 100 && dataPnl.value == '' || dataPnl.value == null || typeof dataPnl.value == 'undefined') {
                alert('Data de conclusão da atividade de painel elétrico: ' + dataHoje())
                dataPnl.value = dataHoje()
                dataMod.value = dataHoje()
            }
        }
        if (temArmazenamento.value == '' && temPainel.value == '' && dataMod.value == '' || dataMod.value == null || typeof dataMod.value == 'undefined') {
            if (perIns.value == 100) {
                alert('Data de conclusão da atividade do final da instalação: ' + dataHoje())
                dataMod.value = dataHoje()
            }
        }
    };
    function dataHoje() {
        var ano = 0
        var mes = 0
        var dia = 0
        var date = new Date()

        ano = date.getFullYear()
        mes = date.getMonth() + 1
        if (mes < 10) {
            mes = '0' + mes
        }
        dia = date.getDate()
        if (dia < 10) {
            dia = '0' + dia
        }
        var dataFinal = ano + '-' + mes + '-' + dia

        return dataFinal
    };


    function stopDefAction(evt) {
        evt.preventDefault();
    };

    function validaIniFim(tipo, entrada, compara) {
        var ano = 0
        var mes = 0
        var dia = 0
        var dataini
        var datafim
        var saifim
        var compini
        var compfim
        var compsai

        switch (tipo) {
            case 'Planejamento':
                datafim = document.getElementById('plafim')
                dataini = document.getElementById('plaini')
                break;
            case 'Projetista':
                datafim = document.getElementById('prjfim')
                dataini = document.getElementById('prjini')
                saifim = document.getElementById('plafim')
                break;
            case 'Aterramento':
                datafim = document.getElementById('atefim')
                dataini = document.getElementById('ateini')
                saifim = document.getElementById('prjfim')
                break;
            case 'Inversor':
                datafim = document.getElementById('invfim')
                dataini = document.getElementById('invini')
                saifim = document.getElementById('prjfim')
                break;
            case 'String':
                datafim = document.getElementById('stbfim')
                dataini = document.getElementById('stbini')
                saifim = document.getElementById('prjfim')
                break;
            case 'Estrutura':
                datafim = document.getElementById('estfim')
                dataini = document.getElementById('estini')
                saifim = document.getElementById('prjfim')
                break;
            case 'Modulos':
                datafim = document.getElementById('modfim')
                dataini = document.getElementById('modini')
                saifim = document.getElementById('estfim')
                break;
            case 'Painel':
                datafim = document.getElementById('pnlfim')
                dataini = document.getElementById('pnlini')
                saifim = document.getElementById('prjfim')
                break;
            case 'Armazenamento':
                datafim = document.getElementById('eaefim')
                dataini = document.getElementById('eaeini')
                saifim = document.getElementById('prjfim')
                break;
            case 'Vistoria':
                datafim = document.getElementById('visfim')
                dataini = document.getElementById('visini')
                saifim = document.getElementById('modfim')
                break;
        }

        ano = dataini.value
        ano = ano.substring(0, 4)
        mes = dataini.value
        mes = mes.substring(5, 7)
        dia = dataini.value
        dia = dia.substring(8, 11)
        compini = ano + '' + mes + '' + dia
        ano = datafim.value
        ano = ano.substring(0, 4)
        mes = datafim.value
        mes = mes.substring(5, 7)
        dia = datafim.value
        dia = dia.substring(8, 11)
        compfim = ano + '' + mes + '' + dia

        if (tipo != 'Planejamento') {
            ano = saifim.value
            ano = ano.substring(0, 4)
            mes = saifim.value
            mes = mes.substring(5, 7)
            dia = saifim.value
            dia = dia.substring(8, 11)
            compsai = ano + '' + mes + '' + dia
            compsai = parseInt(compsai)
        }

        compini = parseInt(compini)
        compfim = parseInt(compfim)

        if (tipo != 'Planejamento') {
            if (compsai != '' && isNaN(compsai) == false && compini < compsai) {
                alert('A data inicial do ' + tipo + ' não pode ser superior a data final do ' + compara + '.');
                dataini.value = ''
                datafim.value = ''
            } else {
                if (compsai == '' || iNaN(compsai) == true) {
                    alert('A data final do(a) ' + compara + ' deve ser preenchida.')
                    dataini.value = ''
                }
            }
        }

        if ((compini == '' || isNaN(compini)) && compfim != '' && isNaN(compfim) == false) {
            datafim.value = ''
        }

        if (compini > compfim && compfim != '' && isNaN(compfim) == false) {
            alert(tipo + ': A data inicial não pode ser superior a data final.');
            if (entrada == 'ini') {
                dataini.value = ''
                datafim.value = ''
            } else {
                datafim.value = ''
            }
        }
    };

    function confirmaEnvio() {
        var result = confirm('Deseja prosseguir com o envio do cronograma para o cliente?')
        if (result == false) {
            alert('Mensagem não enviada!')
        } else {
            var id = document.getElementById('idprojeto')
            window.location.href = '/gerenciamento/enviaMensagem/' + id.value
        }
    }
    
</script>
<form action="/gerenciamento/salvacronograma" method='post'>
    <!-- Modal -->
    <div class="modal fade" id="custosModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Indicadores de Desempenho de Custo do Projeto Sobre o Cronograma</h5>
                    <button type="button" class="btn btn-sm btn-success" data-bs-dismiss="modal" aria-label="Close"
                        onclick="conclusao()">Aplicar</button>
                </div>
                <div class="modal-body">
                    <div class="row" style="width: 100%;">
                        <div class="col-md-8">
                            <div style="text-align: center;">
                                <label class='col-form-label fw-bold'>Percentual de Conclusão do Projeto:
                                    {{projeto.perConclusao}}
                                    %</label><br>
                                <label class='col-form-label mt-1 fw-bold'>Quanto Já Gastei: R$
                                    {{projeto.actualCost}}</label>
                            </div>
                            <div class="row" style="width: 100%;">
                                <div class="col-md-3">
                                    <div class="text-end">
                                        <label class='col-form-label col-form-label-sm'>Contas</label><br>
                                    </div>
                                    <div class="text-end">
                                        <label class="fw-bold col-form-label col-form-label-sm">Gestão: </label><br>
                                        <label class="fw-bold col-form-label col-form-label-sm">Projetista: </label><br>
                                        <label class="fw-bold col-form-label col-form-label-sm">Materiais: </label><br>
                                        <label class="fw-bold col-form-label col-form-label-sm">Instalação: </label><br>
                                        {{#if projeto.ehDireto}}
                                        <label class="fw-bold col-form-label col-form-label-sm">Deslocamento:
                                        </label><br>
                                        {{else}}
                                        <label class="fw-bold col-form-label col-form-label-sm">Estadia: </label><br>
                                        <label class="fw-bold col-form-label col-form-label-sm">Combustível:
                                        </label><br>
                                        {{/if}}
                                        <label class="fw-bold col-form-label col-form-label-sm">Alimentação:
                                        </label><br>
                                        {{#if temCercamento}}
                                        <label class="fw-bold col-form-label col-form-label-sm">Cercamento: </label><br>
                                        {{/if}}
                                        {{#if temCentral}}
                                        <label class="fw-bold col-form-label col-form-label-sm">Central: </label><br>
                                        {{/if}}
                                        {{#if temPosteCond}}
                                        <label class="fw-bold col-form-label col-form-label-sm">Postes: </label><br>
                                        {{/if}}
                                    </div>
                                </div>
                                <div class="col-md-2 text-center">
                                    <label class='col-form-label col-form-label-sm'> Orçado</label><br>
                                    <label class='col-form-label col-form-label-sm' for='totges'>
                                        {{projeto.totges}}</label><br>
                                    <label class='col-form-label col-form-label-sm' for='totpro'>
                                        {{projeto.totpro}}</label><br>
                                    <label class='col-form-label col-form-label-sm' for='totint'>
                                        {{projeto.vlrkit}}</label><br>
                                    <label class='col-form-label col-form-label-sm' for='vlrkit'>
                                        {{projeto.totint}}</label><br>
                                    {{#if projeto.ehDireto}}
                                    <label class='col-form-label col-form-label-sm' for='totdes'>
                                        {{projeto.totdes}}</label><br>
                                    {{else}}
                                    <label class='col-form-label col-form-label-sm' for='tothtl'>
                                        {{projeto.tothtl}}</label><br>
                                    <label class='col-form-label col-form-label-sm' for='totcmb'>
                                        {{projeto.totcmb}}</label><br>
                                    {{/if}}
                                    <label class='col-form-label col-form-label-sm' for='totali'>
                                        {{projeto.totali}}</label><br>
                                    {{#if temCercamento}}
                                    <label class='col-form-label col-form-label-sm'>{{detalhe.valorCer}}</label><br>
                                    {{/if}}
                                    {{#if temCentral}}
                                    <label class='col-form-label col-form-label-sm'>{{detalhe.valorCen}}</label><br>
                                    {{/if}}
                                    {{#if temPosteCond}}
                                    <label class='col-form-label col-form-label-sm'>{{detalhe.valorPos}}</label><br>
                                    {{/if}}
                                </div>
                                <div class="col-md-2 text-center">
                                    <label class='col-form-label col-form-label-sm'>% Conclusão</label><br>
                                    <input class='form-control form-control-sm ' type="number" name='perges' id='perges'
                                        value='{{cronograma.perGes}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input class='form-control form-control-sm ' type="number" name='perpro' id='perpro'
                                        value='{{cronograma.perPro}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input class='form-control form-control-sm ' type="number" name='perkit'
                                        value='{{cronograma.perKit}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input class='form-control form-control-sm ' type="number" name='perins' id='perins'
                                        value='{{cronograma.perIns}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{#if projeto.ehDireto}}
                                    <input class='form-control form-control-sm ' type="number" name='perdes' id='perdes'
                                        value='{{cronograma.perDes}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{else}}
                                    <input class='form-control form-control-sm ' type="number" name='perhtl' id='perhtl'
                                        value='{{cronograma.perHtl}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input class='form-control form-control-sm ' type="number" name='percmb' id='percmb'
                                        value='{{cronograma.perCmb}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                    <input class='form-control form-control-sm ' type="number" name='perali' id='perali'
                                        value='{{cronograma.perAli}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{#if temCercamento}}
                                    <input class='form-control form-control-sm ' type="number" name='percer'
                                        value='{{cronograma.perCer}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                    {{#if temCentral}}
                                    <input class='form-control form-control-sm ' type="number" name='percen'
                                        value='{{cronograma.perCen}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                    {{#if temPosteCond}}
                                    <input class='form-control form-control-sm ' type="number" name='perpos'
                                        value='{{cronograma.perPos}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                </div>
                                <div class='col-md-2 text-center'>
                                    <label class='col-form-label col-form-label-sm'> R$ Valor Ganho</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{evPerGes}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{evPerPro}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{evPerKit}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{evPerIns}}</label><br>
                                    {{#if projeto.ehDireto}}
                                    <label class='col-form-label col-form-label-sm'>{{evPerDes}}</label><br>
                                    {{else}}
                                    <label class='col-form-label col-form-label-sm'>{{evPerHtl}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{evPerCmb}}</label><br>
                                    {{/if}}
                                    <label class='col-form-label col-form-label-sm'>{{evPerAli}}</label><br>
                                    {{#if temCercamento}}
                                    <label class='col-form-label col-form-label-sm'>{{evPerCer}}</label><br>
                                    {{/if}}
                                    {{#if temCentral}}
                                    <label class='col-form-label col-form-label-sm'>{{evPerCen}}</label><br>
                                    {{/if}}
                                    {{#if temPosteCond}}
                                    <label class='col-form-label col-form-label-sm'>{{evPerPos}}</label><br>
                                    {{/if}}
                                </div>
                                <div class="col-md-2 text-center">
                                    <label class='col-form-label col-form-label-sm'>R$ Valor Atual</label>
                                    <input type='text' class='form-control form-control-sm' name='totges'
                                        value='{{realizado.totges}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input type='text' class='form-control form-control-sm' name='totpro'
                                        value='{{realizado.totpro}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input type='text' class='form-control form-control-sm' name='vlrkit'
                                        value='{{realizado.vlrkit}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input type='text' class='form-control form-control-sm' name='totint'
                                        value='{{realizado.totint}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{#if projeto.ehDireto}}
                                    <input type='text' class='form-control form-control-sm' name='totdes'
                                        value='{{realizado.totdes}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{else}}
                                    <input type='text' class='form-control form-control-sm' name='tothtl'
                                        value='{{realizado.tothtl}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    <input type='text' class='form-control form-control-sm' name='totcmb'
                                        value='{{realizado.totcmb}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                    <input type='text' class='form-control form-control-sm' name='totali'
                                        value='{{realizado.totali}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{#if temCercamento}}
                                    <input type='text' class='form-control form-control-sm' name='cercamento'
                                        value='{{realizado.valorCer}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                    {{#if temCentral}}
                                    <input type='text' class='form-control form-control-sm' name='central'
                                        value='{{realizado.valorCen}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                    {{#if temPosteCond}}
                                    <input type='text' class='form-control form-control-sm' name='postecond'
                                        value='{{realizado.valorPos}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                                        projeto.foiRealizado}}disabled{{/if}}>
                                    {{/if}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row" style="width: 100%;">
                                <div class="col-md-6">
                                    <div {{#if cpi}} class="cpiPos" {{else}} class="cpiNeg" {{/if}}>
                                        <label class="col-form-label fw-bold">CPI</label><br>
                                        <label class='col-form-label'>{{projeto.cpi}} </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div {{#if tcpi}} class="cpiPos" {{else}} class="cpiNeg" {{/if}}>
                                        <label class="col-form-label fw-bold">TCPI</label><br>
                                        <label class='col-form-label'>{{projeto.tcpi}}</label>
                                    </div>

                                </div>
                            </div>
                            <div class="row mt-2" style="width: 100%;">
                                <div class="col-md-6 text-end">
                                    <label class='col-form-label col-form-label-sm'>R$ Total Projeto: </label><br>
                                    <label class='col-form-label col-form-label-sm'>R$ Total Operacional:</label><br>
                                    <label class='col-form-label col-form-label-sm'>Estimado em Horas:</label><br>
                                    <label class='col-form-label col-form-label-sm'>Operacional Estimado R$:</label><br>
                                    <label class='col-form-label col-form-label-sm'>Quanto Falta em R$:</label><br>
                                    <label class='col-form-label col-form-label-sm'>Quanto Falta em Horas:</label><br>

                                </div>
                                <div class="col-md-6 text-start">
                                    <label class='col-form-label col-form-label-sm'>{{projeto.valor}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{projeto.custoTotal}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{projeto.hrsprj}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{projeto.eac}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{projeto.etc}}</label><br>
                                    <label class='col-form-label col-form-label-sm'>{{projeto.spi}}</label><br>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->

    <div style="padding: 10px">
        <div class="row" style="width: 100%;">
            <div class="col-md-7">
                <label style='font-weight: bold;font-size:18px'><i class="bi bi-calendar-range"></i> Cronograma do
                    Projeto {{projeto.nome}}</label>
            </div>
            <div class="col-md-5 text-end">
                <div class='btn-group gap-2'>
                    <button type="submit" class="btn btn-sm btn-success"><i class="bi bi-check-circle"></i> Aplicar
                    </button>
                    <a href='/gerenciamento/agenda/' class="btn btn-sm btn-primary"><i class="bi bi-columns"></i> Agenda
                    </a>
                    {{#if projeto.orcado}}
                    {{else}}
                    <a class='btn btn-sm btn-primary' data-bs-toggle="modal" data-bs-target="#custosModal"><i
                            class="bi bi-compass"></i> Indicadores</a>
                    {{/if}}
                    {{#if libRecursos}}
                    <a class='btn btn-sm btn-primary' href='/pessoa/recursosPlanejamento/{{projeto._id}}'><i
                            class='bi bi-people'></i> Recursos</a>
                    {{/if}}
                    {{#if libRecursos}}
                    {{#if projeto.mensagem}}
                    <a class='btn btn-sm btn-success' onclick="confirmaEnvio()" ><i class='bi bi-check-all'
                            id='envia'></i></a>                    
                    {{else}}
                    <a class='btn btn-sm btn-warning' onclick="confirmaEnvio()" ><i class='bi bi-chat-left-text'
                            id='envia'></i></a>
                    {{/if}}
                    {{/if}}                    
                    {{#if projeto.ehDireto}}
                        <a href='/projeto/direto/{{projeto._id}}' class='btn btn-sm btn-primary'><i class="bi bi-arrow-return-left"></i></a>
                    {{else}}
                             <a href='/gerenciamento/gerenciamento/{{projeto._id}}' class='btn btn-sm btn-primary'> <i
                            class="bi bi-arrow-return-left"></i></a>
                    {{/if}}
                </div>
            </div>
        </div>
        <hr>

        <input type="hidden" value='{{projeto._id}}' name='idprojeto' id='idprojeto'>
        <input type="hidden" value='{{projeto.orcado}}' name='orcado'>
        <input type="hidden" value='{{projeto.executando}}' name='executando'>
        <input type="hidden" value='{{projeto.temArmazenamento}}' id='temArmazenamento'>
        <input type="hidden" value='{{projeto.temPainel}}' id='temPainel'>
        <input type="hidden" value='{{projeto.ehDireto}}' id='ehDireto'>
        <div class="row fw-bold" style="width: 100%;">
            <div class="col-md-3 text-end">
                <label class='col-form-label'>Atividades</label>
            </div>
            <div class="col-md-2 text-center">
                <label class='col-form-label'>Data Inicial</label>
            </div>
            <div class="col-md-2 text-center">
                <label class='col-form-label'>Data Final</label>
            </div>
            {{#if projeto.orcado}}
            {{else}}
            <div class="col-md-1">
                <label class='col-form-label'>Finalizou?</label>
            </div>
            <div class="col-md-2 text-center">
                <label class='col-form-label'>Data Finalização</label>
            </div>
            <div class="col-md-1 text-center">
                <label class='col-form-label'>Atrasou</label>
            </div>
            {{/if}}
        </div>
        <div class="row text-end fw-bold" style="width: 100%;">
            <div class="col-md-3">
                <label class='col-form-label col-form-label-sm mt-1'>Planejamento</label><i class='bi bi-info-circle'
                    onmousemove="infoPlano()">:</i><br>
                <label class='col-form-label col-form-label-sm mt-1'>Criação dos Projetos Elétricos</label><i
                    class='bi bi-info-circle' onmousemove="infoPrj()">:</i><br>
                <label class='col-form-label col-form-label-sm mt-1'>Aterramento:</label><br>
                <label class='col-form-label col-form-label-sm mt-1'>Instalação e Configuração dos
                    Inversores:</label><br>
                <label class='col-form-label col-form-label-sm mt-1'>Instalação da String Box:</label><br>
                {{#if projeto.temArmazenamento}}
                <label class='col-form-label col-form-label-sm mt-1'>Instalação da Estação de Armazenameto:</label><br>
                {{/if}}
                {{#if projeto.temPainel}}
                <label class='col-form-label col-form-label-sm mt-1'>Instalação do Painél Elétrico:</label><br>
                {{/if}}
                <label class='col-form-label col-form-label-sm mt-1'>Instalação das Estruturas:</label><br>
                <label class='col-form-label col-form-label-sm mt-1'>Instalação dos Módulos:</label><br>
                <label class='col-form-label col-form-label-sm mt-1'>Vistoria final da instalação:</label><br>
            </div>
            <div class="col-md-2">
                <input type="date" class='form-control form-control-sm mt-1' name='dateplaini' id='plaini' {{#if
                    cronograma.dateplaini}}value='{{cronograma.dateplaini}}' {{else}}value='{{projeto.valDataIni}}'
                    {{/if}} {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Planejamento', 'ini')">
                <input type="date" class='form-control form-control-sm mt-1' name='dateprjini' id='prjini'
                    value='{{cronograma.dateprjini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Projetista', 'ini', 'Planejamento')">
                <input type="date" class='form-control form-control-sm mt-1' name='dateateini' id='ateini'
                    value='{{cronograma.dateateini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Aterramento', 'ini', 'Projetista')">
                <input type="date" class='form-control form-control-sm mt-1' name='dateinvini' id='invini'
                    value='{{cronograma.dateinvini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Inversor', 'ini', 'Projetista')">
                <input type="date" class='form-control form-control-sm mt-1' name='datestbini' id='stbini'
                    value='{{cronograma.datestbini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('String', 'ini', 'Projetista')">
                {{#if projeto.temArmazenamento}}
                <input type="date" class='form-control form-control-sm mt-1' name='dateeaeini' id='eaeini'
                    value='{{cronograma.dateeaeini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Armazenamento', 'ini', 'Projetista')">
                {{/if}}
                {{#if projeto.temPainel}}
                <input type="date" class='form-control form-control-sm mt-1' name='datepnlini' id='pnlini'
                    value='{{cronograma.datepnlini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Painel', 'ini', 'Projetista')">
                {{/if}}
                <input type="date" class='form-control form-control-sm mt-1' name='dateestini' id='estini'
                    value='{{cronograma.dateestini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Estrutura', 'ini', 'Projetista')">
                <input type="date" class='form-control form-control-sm mt-1' name='datemodini' id='modini'
                    value='{{cronograma.datemodini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Modulos', 'ini', 'Estrutura')">
                <input type="date" class='form-control form-control-sm mt-1' name='datevisini' id='visini'
                    value='{{cronograma.datevisini}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Vistoria', 'ini', 'Modulos')">
            </div>
            <div class="col-md-2">
                <input type="date" class='form-control form-control-sm mt-1' name='dateplafim' id='plafim'
                    value='{{cronograma.dateplafim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Planejamento', 'fim')">
                <input type="date" class='form-control form-control-sm mt-1' name='dateprjfim' id='prjfim'
                    value='{{cronograma.dateprjfim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Projetista', 'fim')">
                <input type="date" class='form-control form-control-sm mt-1' name='dateatefim' id='atefim'
                    value='{{cronograma.dateatefim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Aterramento', 'fim')">
                <input type="date" class='form-control form-control-sm mt-1' name='dateinvfim' id='invfim'
                    value='{{cronograma.dateinvfim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Inversor', 'fim')">
                <input type="date" class='form-control form-control-sm mt-1' name='datestbfim' id='stbfim'
                    value='{{cronograma.datestbfim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('String', 'fim')">
                <input type="hidden" id='temArmazenamento' value='{{projeto.temArmazenamento}}'>
                {{#if projeto.temArmazenamento}}
                <input type="date" class='form-control form-control-sm mt-1' name='dateeaefim' id='eaefim'
                    value='{{cronograma.dateeaefim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Armazenamento', 'fim')">
                {{/if}}
                <input type="hidden" id='temPainel' value='{{projeto.temPainel}}'>
                {{#if projeto.temPainel}}
                <input type="date" class='form-control form-control-sm mt-1' name='datepnlfim' id='pnlfim'
                    value='{{cronograma.datepnlfim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Painel', 'fim')">
                {{/if}}
                <input type="hidden" class='form-control form-control-sm mt-1' name='dateVisFimHidden'
                    value='{{cronograma.datevisfim}}'>
                <input type="date" class='form-control form-control-sm mt-1' name='dateestfim' id='estfim'
                    value='{{cronograma.dateestfim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Estrutura', 'fim')">
                <input type="date" class='form-control form-control-sm mt-1' name='datemodfim' id='modfim'
                    value='{{cronograma.datemodfim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Modulos', 'fim')">
                <input type="date" class='form-control form-control-sm mt-1' name='datevisfim' id='visfim'
                    value='{{cronograma.datevisfim}}' {{#if projeto.orcado}}{{else}}disabled{{/if}}
                    onchange="validaIniFim('Vistoria', 'fim')">
            </div>
            <div class="col-md-1 text-center">
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 10%' disabled name='checkPla'
                    {{cronograma.checkPla}}><br>
                {{/if}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 25%' disabled name='checkPrj'
                    {{cronograma.checkPrj}}><br>
                {{/if}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 20%' disabled name='checkAte'
                    {{cronograma.checkAte}}><br>
                {{/if}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 20%' disabled name='checkInv'
                    {{cronograma.checkInv}}><br>
                {{/if}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 22%' disabled name='checkStb'
                    {{cronograma.checkStb}}><br>
                {{/if}}
                {{#if projeto.temArmazenamento}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 20%' disabled name='checkEae'
                    {{cronograma.checkEae}}><br>
                {{/if}}
                {{/if}}
                {{#if projeto.temPainel}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 20%' disabled name='checkPnl'
                    {{cronograma.checkPnl}}><br>
                {{/if}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 22%' disabled name='checkEst'
                    {{cronograma.checkEst}}><br>
                {{/if}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 22%' disabled name='checkMod'
                    {{cronograma.checkMod}}><br>
                {{/if}}
                {{/if}}
                {{#if projeto.orcado}}
                {{else}}
                <input type="checkbox" class='form-check-input' style='margin-top: 20%' disabled name='checkVis'
                    {{cronograma.checkVis}}><br>
                {{/if}}
            </div>
            <div class="col-md-3">
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' onchange="validaDate()"
                            name='datepla' id='datepla' value='{{cronograma.datepla}}' {{#if
                            projeto.homologado}}disabled{{/if}} {{#if projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouPla}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' onchange="validaDate()"
                            name='dateprj' id='dateprj' value='{{cronograma.dateprj}}' {{#if
                            projeto.homologado}}disabled{{/if}} {{#if projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouPrj}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='dateate' id='dateate'
                            value='{{cronograma.dateate}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                            projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouAte}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='dateinv' id='dateinv'
                            value='{{cronograma.dateinv}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                            projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouInv}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='datestb' id='datestb'
                            value='{{cronograma.datestb}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                            projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouStb}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                {{#if projeto.temArmazenamento}}
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='dateeae' id='dateeae'
                            onchange="validaDate()" value='{{cronograma.dateeae}}' {{#if
                            projeto.homologado}}disabled{{/if}} {{#if projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class=" col-md-4">
                        {{#if cronograma.atrasouEae}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                {{/if}}
                {{#if projeto.temPainel}}
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='datepnl' id='datepnl'
                            value='{{cronograma.datepnl}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                            projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouPnl}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                {{/if}}
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='dateest' id='dateest'
                            value='{{cronograma.dateest}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                            projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouEst}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='datemod' id='datemod'
                            onchange="validaDate()" value='{{cronograma.datemod}}' {{#if
                            projeto.homologado}}disabled{{/if}} {{#if projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouMod}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        {{#if projeto.orcado}}
                        {{else}}
                        <input type="date" class='form-control form-control-sm mt-1' name='datevis' id='datevis'
                            value='{{cronograma.datevis}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                            projeto.foiRealizado}}disabled{{/if}}>
                        {{/if}}
                        <input type="hidden" class='form-control form-control-sm mt-1' name='dateVisHidden'
                            value='{{cronograma.datevis}}'>
                    </div>
                    <div class="col-md-4">
                        {{#if cronograma.atrasouVis}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 5px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row" style="width: 100%;">
            {{#if projeto.orcado}}
            <div class="col-md-5 text-end">
                <label class='col-form-label col-form-label-sm fw-bold'>Data de Entrega(Turn Key):</label>
            </div>
            {{else}}
            <div class='col-md-3 fw-bold'>
                <label class="col-form-label col-form-label-sm">Solicitação Vistoria Distribuidora :
                    {{projeto.dataVisto}}</label>
            </div>
            <div class="col-md-2 text-end">
                <label class='col-form-label col-form-label-sm fw-bold'>Data Entrega(Turn Key):</label>
            </div>
            {{/if}}

            <div class="col-md-2">
                <input type="date" class='form-control form-control-sm' name='dateentrega' {{#if
                    projeto.orcado}}{{else}}disabled{{/if}} {{#if
                    cronograma.dateentrega}}value='{{cronograma.dateentrega}}' {{else}} value='{{projeto.valDataPrev}}'
                    {{/if}}>
                <input type="hidden" class='form-control form-control-sm' name='dateEntregaHidden' {{#if
                    cronograma.dateentrega}}value='{{cronograma.dateentrega}}' {{else}} value='{{projeto.valDataPrev}}'
                    {{/if}}>
            </div>
            <div class='col-md-1'>
            </div>
            {{#if projeto.orcado}}
            {{else}}
            <div class="col-md-3">
                <div class="row" style="width: 100%;">
                    <div class="col-md-8">
                        <input type="date" class='form-control form-control-sm' name='dateEntregaReal'
                            value='{{cronograma.dateEntregaReal}}' {{#if projeto.homologado}}disabled{{/if}} {{#if
                            projeto.foiRealizado}}disabled{{/if}}>
                    </div>
                    <div class="col-md-4">
                        {{#if projeto.atrasado}}
                        <div class='text-center'
                            style="border: rgb(199,199,199) solid 1px;border-radius: 10px;margin-top: 2px;"><i
                                class='bi bi-exclamation-triangle' style="font-size: 12px;"></i></div>
                        {{/if}}
                    </div>
                </div>
            </div>
            {{/if}}
        </div>
    </div>
</form>